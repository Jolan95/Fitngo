{% extends 'base.html.twig' %}

{% block title %}Hello AdminController!{% endblock %}

{% block javascripts %}
 {{ encore_entry_script_tags('modal') }}
{% endblock %}

{% block body %}
{% embed 'includes/navigation.html.twig' %}
    {% block additionalItem %}
        <div class="d-flex align-items-center">
          <h2>{{franchise.userInfo.name}} - {{structure.userInfo.name}}</h2> 
          <div>
              {% if structure.isActive == true %}
               <div class="circle-green"></div>
                {% else %}
                <div class="circle-red"></div>
              {% endif %}
          </div>
        </div>
    {% endblock %}
{% endembed %}
    <a href="{{path("app_edit_franchise", {"id" : franchise.id})}}" class="position-absolute m-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-backspace-fill red size-up" viewBox="0 0 16 16">
          <path d="M15.683 3a2 2 0 0 0-2-2h-7.08a2 2 0 0 0-1.519.698L.241 7.35a1 1 0 0 0 0 1.302l4.843 5.65A2 2 0 0 0 6.603 15h7.08a2 2 0 0 0 2-2V3zM5.829 5.854a.5.5 0 1 1 .707-.708l2.147 2.147 2.146-2.147a.5.5 0 1 1 .707.708L9.39 8l2.146 2.146a.5.5 0 0 1-.707.708L8.683 8.707l-2.147 2.147a.5.5 0 0 1-.707-.708L7.976 8 5.829 5.854z"/>
        </svg>
    </a>


<div class="container mt-5">
    <div class="d-flex jusitfy-content-center">
    <div class='d-flex justify-content-between'> 
        {% if mail == true %}
        <a target="_blank" href="{{path("email_new_permit_structure", {id : id})}}"><button class="btn-grad grad-blue">
            Mail Structure
        </button></a>
        <a target="_blank" href="{{path("email_new_permit_structure_toFranchise", {id : id})}}"><button class="btn-grad grad-blue">
            Mail pour la franchise
        </button></a>
        {% endif %}
    </div>
    <div class="box-wrapper box-wrapper-big ">
        {# <div>ID : {{structure.userInfo.id}}</div>
        <div>Email : {{structure.userInfo.email}}</div> #}
        <div>
            {{ form_start(form, {'attr': {'id': "form_edit_permit"}})}}
            <div class="isActive d-flex justify-content-center">
            {{ form_row(form.isActive) }} 
            </div>
            {{ form_row(form.Permit) }}
            <button type="button" class="btn btn-primary" data-toggle="modal" id="modal" disabled data-target="#permitModal">
                Enregistrer les modifications
            </button>
            {{ form_end(form) }}
        </div>
    </div>    
    </div>    

    <div class="m-4">
        <button class="btn-grad grad-red w-100" id="remove-structure">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
                <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"/>
            </svg>
            Supprimer la structure
        </button>
    </div>  
</div>



{# modal handle permit #}
<div class="modal fade" id="permitModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
      <h5>Modifications permissions</h5>
      </div>
      <div class="modal-body">
        <p>Etes-vous sûr de vouloir enregistrer les modifications?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal" id="modal-close">Annuler</button>
        <button  type="submit" form="form_edit_permit" class="btn btn-success">Enregistrer les Modifications</button> 
      </div>
    </div>
  </div>
</div>

{# modal remove structure #}
<div class="modal fade" id="remove-structure-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
      <h5>Suppression Structure</h5>
      </div>
      <div class="modal-body">
        <p>Etes-vous sûr de vouloir supprimer la structure {{structure.userInfo.name}} ?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-dark" data-dismiss="modal" id="remove-structure-close">Annuler</button>
        <a href="{{path("remove_structure", {"id" : structure.id})}}"><button class="btn btn-danger">Supprimer</button></a>
      </div>
    </div>
  </div>
</div>  

{% endblock %}
