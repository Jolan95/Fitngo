{% extends 'base.html.twig' %}

{% block title %}Hello AdminController!{% endblock %}

{% block javascripts %}
 {{ encore_entry_script_tags('modal') }}
{% endblock %}

{% block body %}
{% embed 'includes/navigation.html.twig' %}
{% endembed %}
<div class="mt-3 container-fluid">
    <div class='d-flex justify-content-between'> 
        <a href="{{path("app_edit_franchise", {"id" : franchise.id})}}">
            <button class="btn btn-danger">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
            </svg>
             Retour
            </button>
        </a>
            {% if mail == true %}
            <a target="_blank" href="{{path("email_new_permit_structure", {id : id})}}"><button>
                Mail Structure
            </button></a>
            <a target="_blank" href="{{path("email_new_permit_structure_toFranchise", {id : id})}}"><button>
                Mail pour la franchise
            </button></a>
            {% endif %}
        <div class="d-flex align-items-center">
          <h2>{{franchise.userInfo.name}} - {{structure.userInfo.name}}</h2> 
          <div>
              [
              {% if structure.isActive == true %}
              <span class="green">Actif</span>
              {% else %}
              <span class="red">Inactif</span>
              {% endif %}
              ]
          </div>
        </div>
        <div>
          <button class="btn btn-dark" id="remove-structure">
            Supprimer cette structure
          </button>
        </div>
    </div>
</div>
<div class="container">
    <div class="box-wrapper box-wrapper-big ">
        <div>ID : {{structure.userInfo.id}}</div>
        <div>Email : {{structure.userInfo.email}}</div>
        <div>
            {{ form_start(form, {'attr': {'id': "form_edit_permit"}})}}
            {{ form_widget(form) }}
            <button type="button" class="btn btn-primary" data-toggle="modal" id="modal" disabled data-target="#permitModal">
                Enregistrer les modifications
            </button>
            {{ form_end(form) }}
        </div>
    </div>    
</div>


{# modal handle permit #}
<div class="modal fade" id="permitModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
      <h5>Modifications permissions</h5>
      </div>
      <div class="modal-body">
        <p>Etes-vous sûr de vouloir enregistrer les modifications?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal" id="modal-close">Annuler</button>
        <button  type="submit" form="form_edit_permit" class="btn btn-success">Enregistrer les Modifications</button> 
      </div>
    </div>
  </div>
</div>

{# modal remove structure #}
<div class="modal fade" id="remove-structure-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
      <h5>Suppression Structure</h5>
      </div>
      <div class="modal-body">
        <p>Etes-vous sûr de vouloir supprimer la structure {{structure.userInfo.name}} ?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal" id="remove-structure-close">Annuler</button>
        <a href="{{path("remove_structure", {"id" : structure.id})}}"><button class="btn btn-dark">Supprimer</button></a>
      </div>
    </div>
  </div>
</div>  

{% endblock %}
